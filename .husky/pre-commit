#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# pnpm  æ°¸è¿œéƒ½æ˜¯æ‰§è¡Œ scripts é‡Œçš„ ï¼Œè€Œä¸æ˜¯æ‰§è¡Œ node_modules é‡Œçš„ CLI ç¨‹åºã€‚
# npx  æ˜¯ç›´æ¥æ‰§è¡Œ node_modules/.bin/ï¼Œä¸ä¾èµ– scriptsã€‚
pnpm exec lint-staged
# $?ï¼šshell é‡Œä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œæ°¸è¿œè¡¨ç¤ºä¸Šä¸€æ¡å‘½ä»¤çš„é€€å‡ºç ã€‚
status=$?

# -neï¼šnot equalï¼Œæ•´æ•°ä¸ç­‰äºã€‚
if [ "$status" -ne 0 ]; then
  echo ""
  echo "âŒ Commit å¤±è´¥ï¼šä»£ç æ ¼å¼ / Lint æœªé€šè¿‡ã€‚"
  echo "ğŸ‘‰ å»ºè®®å…ˆæ‰‹åŠ¨è¿è¡Œï¼š"
  # è¿™é‡Œåç»­éœ€è¦é…ç½®å®é™…çš„æ ¼å¼åŒ–å‘½ä»¤ï¼Œç„¶åæŠŠè¿™ä¸ªæ³¨é‡Šä¹Ÿåˆ é™¤ï¼Œæ²¡åˆ é™¤è¯´æ˜è¿˜æ²¡é…å¯¹åº”çš„å‘½ä»¤ã€‚
  echo "   pnpm lint:fix    # [é¡¹ç›®ä¸åŒï¼šä¹Ÿå¯èƒ½å« pnpm lint æˆ– pnpm eslint:fix]"
  exit $status
fi